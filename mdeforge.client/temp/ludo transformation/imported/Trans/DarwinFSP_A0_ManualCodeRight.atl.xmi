<?xml version="1.0" encoding="ASCII"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:atl="http://www.eclipse.org/gmt/2005/ATL" xmlns:ocl="http://www.eclipse.org/gmt/2005/OCL">
  <atl:Module location="6:1-42:2" name="DarwinFSP_A0_ManualCodeRight">
    <commentsBefore>-- @atlcompiler atl2006</commentsBefore>
    <commentsBefore>-- generated by DUALLy</commentsBefore>
    <commentsBefore>-- Department of Computer Science</commentsBefore>
    <commentsBefore>-- University of L'Aquila</commentsBefore>
    <inModels location="7:29-7:45" name="IN" metamodel="/2"/>
    <outModels location="7:8-7:23" name="OUT" metamodel="/1"/>
    <elements xsi:type="atl:LazyMatchedRule" location="9:1-17:2" name="createType">
      <outPattern location="11:2-12:36">
        <elements xsi:type="atl:SimpleOutPatternElement" location="11:5-12:36" varName="leftSide" variableExp="/0/@elements.0/@actionBlock/@statements.0/@value /0/@elements.0/@actionBlock/@statements.1/@expression">
          <type xsi:type="ocl:OclModelElement" location="11:16-11:67" name="DarwinFSP::Darwin::ComponentDeclaration" model="/4"/>
          <bindings location="12:4-12:35" propertyName="name">
            <value xsi:type="ocl:OperatorCallExp" location="12:12-12:35" operationName="+">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="12:12-12:26" name="name">
                <source xsi:type="ocl:VariableExp" location="12:12-12:21" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
              </source>
              <arguments xsi:type="ocl:StringExp" location="12:29-12:35" stringSymbol="Type"/>
            </value>
          </bindings>
        </elements>
      </outPattern>
      <actionBlock location="13:2-16:3">
        <statements xsi:type="atl:BindingStat" location="14:3-14:112">
          <source xsi:type="ocl:NavigationOrAttributeCallExp" location="14:3-14:99" name="componentDeclarations">
            <source xsi:type="ocl:OperationCallExp" location="14:3-14:77" operationName="first">
              <source xsi:type="ocl:OperationCallExp" location="14:3-14:69" operationName="asSequence">
                <source xsi:type="ocl:OperationCallExp" location="14:3-14:56" operationName="allInstancesFrom">
                  <source xsi:type="ocl:OclModelElement" location="14:3-14:32" name="DarwinSpecification" model="/5"/>
                  <arguments xsi:type="ocl:StringExp" location="14:50-14:55" stringSymbol="OUT"/>
                </source>
              </source>
            </source>
          </source>
          <value xsi:type="ocl:VariableExp" location="14:103-14:111" referredVariable="/0/@elements.0/@outPattern/@elements.0"/>
        </statements>
        <statements xsi:type="atl:ExpressionStat" location="15:3-15:12">
          <expression xsi:type="ocl:VariableExp" location="15:3-15:11" referredVariable="/0/@elements.0/@outPattern/@elements.0"/>
        </statements>
      </actionBlock>
      <inPattern location="10:2-10:63">
        <elements xsi:type="atl:SimpleInPatternElement" location="10:7-10:63" varName="rightSide" variableExp="/0/@elements.0/@outPattern/@elements.0/@bindings.0/@value/@source/@source">
          <type xsi:type="ocl:OclModelElement" location="10:19-10:63" name="A0_Behavior::core::SAComponent" model="/3"/>
        </elements>
      </inPattern>
    </elements>
    <elements xsi:type="atl:MatchedRule" location="19:1-42:2" name=" ComponentInstance_SAComponent">
      <outPattern location="22:3-26:6">
        <elements xsi:type="atl:SimpleOutPatternElement" location="23:5-26:6" varName="leftSide" variableExp="/0/@elements.1/@actionBlock/@statements.2/@thenStatements.0/@source/@source /0/@elements.1/@actionBlock/@statements.3/@thenStatements.0/@source/@source/@source /0/@elements.1/@actionBlock/@statements.4/@value/@arguments.0/@tuplePart.1/@initExpression">
          <type xsi:type="ocl:OclModelElement" location="23:16-23:64" name="DarwinFSP::Darwin::ComponentInstance" model="/7"/>
          <bindings location="24:7-24:35" propertyName="identifier">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="24:21-24:35" name="name">
              <source xsi:type="ocl:VariableExp" location="24:21-24:30" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="25:7-25:44" propertyName="declaration">
            <value xsi:type="ocl:OperationCallExp" location="25:22-25:44" operationName="first">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="25:22-25:36" name="type">
                <source xsi:type="ocl:VariableExp" location="25:22-25:31" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
              </source>
            </value>
          </bindings>
        </elements>
      </outPattern>
      <actionBlock location="27:3-41:4">
        <statements xsi:type="atl:ForStat" location="28:5-30:7">
          <iterator location="28:10-28:11" varName="i" variableExp="/0/@elements.1/@actionBlock/@statements.0/@statements.0/@value/@arguments.0"/>
          <collection xsi:type="ocl:IteratorExp" location="28:15-28:125" name="select">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="28:15-28:35" name="subElement">
              <source xsi:type="ocl:VariableExp" location="28:15-28:24" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </source>
            <body xsi:type="ocl:OperatorCallExp" location="28:48-28:124" operationName="and">
              <source xsi:type="ocl:OperationCallExp" location="28:48-28:84" operationName="oclIsKindOf">
                <source xsi:type="ocl:VariableExp" location="28:48-28:49" referredVariable="/0/@elements.1/@actionBlock/@statements.0/@collection/@iterators.0"/>
                <arguments xsi:type="ocl:OclModelElement" location="28:62-28:83" name="Component" model="/8"/>
              </source>
              <arguments xsi:type="ocl:OperatorCallExp" location="28:89-28:124" operationName="not">
                <source xsi:type="ocl:OperationCallExp" location="28:93-28:124" operationName="oclIsUndefined">
                  <source xsi:type="ocl:NavigationOrAttributeCallExp" location="28:93-28:107" name="type">
                    <source xsi:type="ocl:VariableExp" location="28:93-28:102" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                  </source>
                </source>
              </arguments>
            </body>
            <iterators location="28:44-28:45" varName="e" variableExp="/0/@elements.1/@actionBlock/@statements.0/@collection/@body/@source/@source"/>
          </collection>
          <statements xsi:type="atl:BindingStat" location="29:6-29:121">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="29:6-29:79" name="innerInstances">
              <source xsi:type="ocl:OperationCallExp" location="29:6-29:64" operationName="resolveTemp">
                <source xsi:type="ocl:VariableExp" location="29:6-29:16" referredVariable="/9"/>
                <arguments xsi:type="ocl:OperationCallExp" location="29:29-29:51" operationName="first">
                  <source xsi:type="ocl:NavigationOrAttributeCallExp" location="29:29-29:43" name="type">
                    <source xsi:type="ocl:VariableExp" location="29:29-29:38" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                  </source>
                </arguments>
                <arguments xsi:type="ocl:StringExp" location="29:53-29:63" stringSymbol="leftSide"/>
              </source>
            </source>
            <value xsi:type="ocl:OperationCallExp" location="29:83-29:120" operationName="resolveTemp">
              <source xsi:type="ocl:VariableExp" location="29:83-29:93" referredVariable="/10"/>
              <arguments xsi:type="ocl:VariableExp" location="29:106-29:107" referredVariable="/0/@elements.1/@actionBlock/@statements.0/@iterator"/>
              <arguments xsi:type="ocl:StringExp" location="29:109-29:119" stringSymbol="leftSide"/>
            </value>
          </statements>
        </statements>
        <statements xsi:type="atl:ForStat" location="31:6-33:7">
          <iterator location="31:11-31:12" varName="i" variableExp="/0/@elements.1/@actionBlock/@statements.1/@statements.0/@value/@arguments.0"/>
          <collection xsi:type="ocl:IteratorExp" location="31:16-31:121" name="select">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="31:16-31:36" name="subElement">
              <source xsi:type="ocl:VariableExp" location="31:16-31:25" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </source>
            <body xsi:type="ocl:OperatorCallExp" location="31:49-31:120" operationName="and">
              <source xsi:type="ocl:OperationCallExp" location="31:49-31:80" operationName="oclIsKindOf">
                <source xsi:type="ocl:VariableExp" location="31:49-31:50" referredVariable="/0/@elements.1/@actionBlock/@statements.1/@collection/@iterators.0"/>
                <arguments xsi:type="ocl:OclModelElement" location="31:63-31:79" name="Link" model="/11"/>
              </source>
              <arguments xsi:type="ocl:OperatorCallExp" location="31:85-31:120" operationName="not">
                <source xsi:type="ocl:OperationCallExp" location="31:89-31:120" operationName="oclIsUndefined">
                  <source xsi:type="ocl:NavigationOrAttributeCallExp" location="31:89-31:103" name="type">
                    <source xsi:type="ocl:VariableExp" location="31:89-31:98" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                  </source>
                </source>
              </arguments>
            </body>
            <iterators location="31:45-31:46" varName="e" variableExp="/0/@elements.1/@actionBlock/@statements.1/@collection/@body/@source/@source"/>
          </collection>
          <statements xsi:type="atl:BindingStat" location="32:7-32:121">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="32:7-32:79" name="innerBindings">
              <source xsi:type="ocl:OperationCallExp" location="32:7-32:65" operationName="resolveTemp">
                <source xsi:type="ocl:VariableExp" location="32:7-32:17" referredVariable="/12"/>
                <arguments xsi:type="ocl:OperationCallExp" location="32:30-32:52" operationName="first">
                  <source xsi:type="ocl:NavigationOrAttributeCallExp" location="32:30-32:44" name="type">
                    <source xsi:type="ocl:VariableExp" location="32:30-32:39" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                  </source>
                </arguments>
                <arguments xsi:type="ocl:StringExp" location="32:54-32:64" stringSymbol="leftSide"/>
              </source>
            </source>
            <value xsi:type="ocl:OperationCallExp" location="32:83-32:120" operationName="resolveTemp">
              <source xsi:type="ocl:VariableExp" location="32:83-32:93" referredVariable="/13"/>
              <arguments xsi:type="ocl:VariableExp" location="32:106-32:107" referredVariable="/0/@elements.1/@actionBlock/@statements.1/@iterator"/>
              <arguments xsi:type="ocl:StringExp" location="32:109-32:119" stringSymbol="leftSide"/>
            </value>
          </statements>
        </statements>
        <statements xsi:type="atl:IfStat" location="34:6-36:7">
          <condition xsi:type="ocl:OperationCallExp" location="34:9-34:33" operationName="isEmpty">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="34:9-34:23" name="type">
              <source xsi:type="ocl:VariableExp" location="34:9-34:18" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </source>
          </condition>
          <thenStatements xsi:type="atl:BindingStat" location="35:7-35:64">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="35:7-35:27" name="declaration">
              <source xsi:type="ocl:VariableExp" location="35:7-35:15" referredVariable="/0/@elements.1/@outPattern/@elements.0"/>
            </source>
            <value xsi:type="ocl:OperationCallExp" location="35:31-35:63" operationName="createType">
              <source xsi:type="ocl:VariableExp" location="35:31-35:41" referredVariable="/14"/>
              <arguments xsi:type="ocl:VariableExp" location="35:53-35:62" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </value>
          </thenStatements>
        </statements>
        <statements xsi:type="atl:IfStat" location="37:6-39:7">
          <condition xsi:type="ocl:OperatorCallExp" location="37:9-37:74" operationName="and">
            <source xsi:type="ocl:OperatorCallExp" location="37:9-37:37" operationName="not">
              <source xsi:type="ocl:OperationCallExp" location="37:13-37:37" operationName="isEmpty">
                <source xsi:type="ocl:NavigationOrAttributeCallExp" location="37:13-37:27" name="type">
                  <source xsi:type="ocl:VariableExp" location="37:13-37:22" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                </source>
              </source>
            </source>
            <arguments xsi:type="ocl:OperatorCallExp" location="37:42-37:74" operationName="not">
              <source xsi:type="ocl:OperationCallExp" location="37:46-37:74" operationName="isEmpty">
                <source xsi:type="ocl:NavigationOrAttributeCallExp" location="37:46-37:64" name="behavior">
                  <source xsi:type="ocl:VariableExp" location="37:46-37:55" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                </source>
              </source>
            </arguments>
          </condition>
          <thenStatements xsi:type="atl:BindingStat" location="38:7-38:105">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="38:7-38:38" name="relatedFSP">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="38:7-38:27" name="declaration">
                <source xsi:type="ocl:VariableExp" location="38:7-38:15" referredVariable="/0/@elements.1/@outPattern/@elements.0"/>
              </source>
            </source>
            <value xsi:type="ocl:OperationCallExp" location="38:42-38:104" operationName="resolveTemp">
              <source xsi:type="ocl:VariableExp" location="38:42-38:52" referredVariable="/15"/>
              <arguments xsi:type="ocl:OperationCallExp" location="38:65-38:91" operationName="first">
                <source xsi:type="ocl:NavigationOrAttributeCallExp" location="38:65-38:83" name="behavior">
                  <source xsi:type="ocl:VariableExp" location="38:65-38:74" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                </source>
              </arguments>
              <arguments xsi:type="ocl:StringExp" location="38:93-38:103" stringSymbol="leftSide"/>
            </value>
          </thenStatements>
        </statements>
        <statements xsi:type="atl:BindingStat" location="40:6-40:101">
          <source xsi:type="ocl:NavigationOrAttributeCallExp" location="40:6-40:23" name="traces">
            <source xsi:type="ocl:VariableExp" location="40:6-40:16" referredVariable="/16"/>
          </source>
          <value xsi:type="ocl:OperationCallExp" location="40:27-40:100" operationName="including">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="40:27-40:44" name="traces">
              <source xsi:type="ocl:VariableExp" location="40:27-40:37" referredVariable="/17"/>
            </source>
            <arguments xsi:type="ocl:TupleExp" location="40:55-40:99">
              <tuplePart location="40:61-40:79" varName="source">
                <initExpression xsi:type="ocl:VariableExp" location="40:70-40:79" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
              </tuplePart>
              <tuplePart location="40:81-40:98" varName="target">
                <initExpression xsi:type="ocl:VariableExp" location="40:90-40:98" referredVariable="/0/@elements.1/@outPattern/@elements.0"/>
              </tuplePart>
            </arguments>
          </value>
        </statements>
      </actionBlock>
      <inPattern location="20:3-21:61">
        <elements xsi:type="atl:SimpleInPatternElement" location="21:5-21:61" varName="rightSide" variableExp="/0/@elements.1/@outPattern/@elements.0/@bindings.0/@value/@source /0/@elements.1/@outPattern/@elements.0/@bindings.1/@value/@source/@source /0/@elements.1/@actionBlock/@statements.0/@collection/@source/@source /0/@elements.1/@actionBlock/@statements.0/@collection/@body/@arguments.0/@source/@source/@source /0/@elements.1/@actionBlock/@statements.0/@statements.0/@source/@source/@arguments.0/@source/@source /0/@elements.1/@actionBlock/@statements.1/@collection/@source/@source /0/@elements.1/@actionBlock/@statements.1/@collection/@body/@arguments.0/@source/@source/@source /0/@elements.1/@actionBlock/@statements.1/@statements.0/@source/@source/@arguments.0/@source/@source /0/@elements.1/@actionBlock/@statements.2/@condition/@source/@source /0/@elements.1/@actionBlock/@statements.2/@thenStatements.0/@value/@arguments.0 /0/@elements.1/@actionBlock/@statements.3/@condition/@source/@source/@source/@source /0/@elements.1/@actionBlock/@statements.3/@condition/@arguments.0/@source/@source/@source /0/@elements.1/@actionBlock/@statements.3/@thenStatements.0/@value/@arguments.0/@source/@source /0/@elements.1/@actionBlock/@statements.4/@value/@arguments.0/@tuplePart.0/@initExpression">
          <type xsi:type="ocl:OclModelElement" location="21:17-21:61" name="A0_Behavior::core::SAComponent" model="/6"/>
        </elements>
      </inPattern>
    </elements>
  </atl:Module>
  <ocl:OclModel location="7:14-7:23" name="DarwinFSP" model="/0/@outModels.0"/>
  <ocl:OclModel location="7:34-7:45" name="A0_Behavior" model="/0/@inModels.0"/>
  <ocl:OclModel location="10:19-10:30" name="A0_Behavior" elements="/0/@elements.0/@inPattern/@elements.0/@type"/>
  <ocl:OclModel location="11:16-11:25" name="DarwinFSP" elements="/0/@elements.0/@outPattern/@elements.0/@type"/>
  <ocl:OclModel location="14:3-14:12" name="DarwinFSP" elements="/0/@elements.0/@actionBlock/@statements.0/@source/@source/@source/@source/@source"/>
  <ocl:OclModel location="21:17-21:28" name="A0_Behavior" elements="/0/@elements.1/@inPattern/@elements.0/@type"/>
  <ocl:OclModel location="23:16-23:25" name="DarwinFSP" elements="/0/@elements.1/@outPattern/@elements.0/@type"/>
  <ocl:OclModel location="28:62-28:73" name="A0_Behavior" elements="/0/@elements.1/@actionBlock/@statements.0/@collection/@body/@source/@arguments.0"/>
  <ocl:VariableDeclaration location="29:6-29:16" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.0/@statements.0/@source/@source/@source"/>
  <ocl:VariableDeclaration location="29:83-29:93" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.0/@statements.0/@value/@source"/>
  <ocl:OclModel location="31:63-31:74" name="A0_Behavior" elements="/0/@elements.1/@actionBlock/@statements.1/@collection/@body/@source/@arguments.0"/>
  <ocl:VariableDeclaration location="32:7-32:17" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.1/@statements.0/@source/@source/@source"/>
  <ocl:VariableDeclaration location="32:83-32:93" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.1/@statements.0/@value/@source"/>
  <ocl:VariableDeclaration location="35:31-35:41" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.2/@thenStatements.0/@value/@source"/>
  <ocl:VariableDeclaration location="38:42-38:52" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.3/@thenStatements.0/@value/@source"/>
  <ocl:VariableDeclaration location="40:6-40:16" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.4/@source/@source"/>
  <ocl:VariableDeclaration location="40:27-40:37" varName="thisModule" variableExp="/0/@elements.1/@actionBlock/@statements.4/@value/@source/@source"/>
</xmi:XMI>
